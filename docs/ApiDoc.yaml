# Разрабатывается на основе прошлого проекта

# Для быстрого использования:
#   - скопироватть код
#   - перейти на страницу https://editor.swagger.io/
#   - вставить код в левую область на экране

openapi: 3.0.2
info:
  title: 'meeco'
  version: ''
  description: 'Прекрасный магазин эко товаров'
paths:
  /api/v1/users/:
    get:
      operationId: Список пользователей
      description: 'Получение полного списка пользователей'
      parameters:
        - name: page
          required: false
          in: query
          description: Номер страницы.
          schema:
            type: integer
        - name: limit
          required: false
          in: query
          description: Количество объектов на странице.
          schema:
            type: integer
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: 'Общее количество объектов в базе'
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://meeco.ru/api/v1/users/?page=4
                    description: 'Ссылка на следующую страницу'
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://meeco.ru/api/v1/users/?page=2
                    description: 'Ссылка на предыдущую страницу'
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                    description: 'Список объектов текущей страницы'
          description: ''
      tags:
        - Пользователи
    post:
      operationId: Регистрация пользователя
      description: ''
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomUserCreate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomUserResponseOnCreate'
          description: 'Пользователь успешно создан'
        '400':
          $ref: '#/components/responses/ValidationError'
      tags:
        - Пользователи
  /api/v1/users/{id}/:
    get:
      operationId: Профиль пользователя
      description: 'Доступно всем пользователям.'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный id этого пользователя"
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '404':
          $ref: '#/components/responses/NotFound'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи
  /api/v1/users/me/:
    get:
      operationId: Текущий пользователь
      description: ''
      parameters: []
      security:
        - Token: [ ]
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ''
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи
  /api/v1/users/set_password/:
    post:
      operationId: Изменение пароля
      description: 'Изменение пароля текущего пользователя'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetPassword'
      responses:
        '204':
          description: 'Пароль успешно изменен'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи
  /api/v1/auth/token/login/:
    post:
      operationId: Получить токен авторизации
      description: Используется для авторизации по емейлу и паролю, чтобы далее использовать токен при запросах.
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TokenCreate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenGetResponse'
          description: ''
      tags:
        - Пользователи
  /api/v1/auth/token/logout/:
    post:
      operationId: Удаление токена
      description: Удаляет токен текущего пользователя
      parameters: []
      requestBody:
        content:
          application/json:
            schema: {}

      responses:
        '204':
          content:
            application/json:
              schema: {}
          description: ''
        '401':
          $ref: '#/components/responses/AuthenticationError'
      tags:
        - Пользователи

  /api/v1/categories/:
    get:
      operationId: Cписок категорий
      description: ''
      parameters: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Category'
          description: ''
      tags:
        - Категории
    post:
      security:
        - Token: []
      operationId: Создание категории
      description: 'Доступно только продавцу'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryCreateUpdate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: 'Товар успешно создан'
        '400':
          description: 'Ошибки валидации в стандартном формате DRF'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Категории
  /api/v1/categories/{id}/:
    get:
      operationId: Получение категории
      description: ''
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этогой Категории."
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: ''
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Категории
    patch:
      operationId: Обновление категории
      security:
        - Token: [ ]
      description: 'Доступно только продавцу'
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этой категории."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoryCreateUpdate'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
          description: 'Категория успешно обновлена'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Категории
  
  /api/v1/brands/:
    get:
      operationId: Cписок производителей
      description: ''
      parameters: []
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Brand'
          description: ''
      tags:
        - Производители
    post:
      security:
        - Token: []
      operationId: Создание производителя
      description: 'Доступно только продавцу'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BrandCreateUpdate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Brand'
          description: 'Товар успешно создан'
        '400':
          description: 'Ошибки валидации в стандартном формате DRF'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Производители
  /api/v1/brands/{id}/:
    get:
      operationId: Получение производителя
      description: ''
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого производителя."
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Brand'
          description: ''
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Производители
    patch:
      operationId: Обновление производителя
      security:
        - Token: [ ]
      description: 'Доступно только продавцу'
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого производителя."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BrandCreateUpdate'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Brand'
          description: 'Категория успешно обновлена'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Производители

  /api/products/:
    get:
      operationId: Список товаров
      description: Страница доступна всем пользователям
      parameters:
        - name: page
          required: false
          in: query
          description: Номер страницы.
          schema:
            type: integer
        - name: limit
          required: false
          in: query
          description: Количество объектов на странице.
          schema:
            type: integer
        - name: is_favorited
          required: false
          in: query
          description: Показывать только рецепты, находящиеся в списке избранного.
          schema:
            type: integer
            enum: [0, 1]
        - name: is_in_shopping_cart
          required: false
          in: query
          description: Показывать только рецепты, находящиеся в списке покупок.
          schema:
            type: integer
            enum: [0, 1]
        - name: events
          required: false
          in: query
          description: Показывать товары только с указанными тегами (по slug)
          example: 'lunch&tags=new'
          schema:
            type: array
            items:
              type: string
        - name: categories
          required: false
          in: query
          description: Показывать товары только с указанными категориями (по slug)
          example: 'lunch&categories=bathroom'
          schema:
            type: array
            items:
              type: string
        - name: brands
          required: false
          in: query
          description: Показывать товары только с указанными категориями (по slug)
          example: 'lunch&brand=company'
          schema:
            type: array
            items:
              type: string

      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  count:
                    type: integer
                    example: 123
                    description: 'Общее количество объектов в базе'
                  next:
                    type: string
                    nullable: true
                    format: uri
                    example: http://meeco.ru/api/v1/products/?page=4
                    description: 'Ссылка на следующую страницу'
                  previous:
                    type: string
                    nullable: true
                    format: uri
                    example: http://meeco.ru/api/v1/products/?page=2
                    description: 'Ссылка на предыдущую страницу'
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/ProductList'
                      # $ref: '#/components/schemas/RecipeList'
                    description: 'Список объектов текущей страницы'
          description: ''
      tags:
        - Товары
    post:
      security:
        - Token: []
      operationId: Создание товара
      description: 'Доступно только продавцу'
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdate'
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductList'
          description: 'Товар успешно создан'
        '400':
          description: 'Ошибки валидации в стандартном формате DRF'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationError'
        '401':
          $ref: '#/components/schemas/AuthenticationError'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Товары

  /api/products/{id}/:
    get:
      operationId: Получение товара
      description: ''
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого товара"
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductList'
          description: ''
      tags:
        - Товары
    patch:
      operationId: Обновление товара
      security:
        - Token: [ ]
      description: 'Доступно только продавцу'
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого товара."
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductCreateUpdate'
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProductList'
          description: 'Товар успешно обновлен'
        '400':
          $ref: '#/components/responses/NestedValidationError'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Товары
    delete:
      operationId: Удаление товара

      description: 'Доступно только продавцу'
      security:
        - Token: [ ]
      parameters:
        - name: id
          in: path
          required: true
          description: "Уникальный идентификатор этого товара"
          schema:
            type: string
      responses:
        '204':
          description: 'Товар успешно удален'
        '401':
          $ref: '#/components/responses/AuthenticationError'
        '403':
          $ref: '#/components/responses/PermissionDenied'
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Товары
  
  # /api/recipes/{id}/favorite/:
  #   post:
  #     operationId: Добавить рецепт в избранное
  #     description: 'Доступно только авторизованному пользователю.'
  #     security:
  #       - Token: [ ]
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: "Уникальный идентификатор этого рецепта"
  #         schema:
  #           type: string
  #     responses:
  #       '201':
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/RecipeMinified'
  #         description: 'Рецепт успешно добавлен в избранное'
  #       '400':
  #         description: 'Ошибка добавления в избранное (Например, когда рецепт уже есть в избранном)'
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/SelfMadeError'
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'

  #     tags:
  #       - Избранное
  #   delete:
  #     operationId: Удалить рецепт из избранного
  #     description: 'Доступно только авторизованным пользователям'
  #     security:
  #       - Token: [ ]
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: "Уникальный идентификатор этого рецепта."
  #         schema:
  #           type: string
  #     responses:
  #       '204':
  #         description: 'Рецепт успешно удален из избранного'
  #       '400':
  #         description: 'Ошибка удаления из избранного (Например, когда рецепта там не было)'
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/SelfMadeError'
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'
  #     tags:
  #       - Избранное
  # /api/recipes/{id}/shopping_cart/:
  #   post:
  #     operationId: Добавить рецепт в список покупок
  #     description: 'Доступно только авторизованным пользователям'
  #     security:
  #       - Token: [ ]
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: "Уникальный идентификатор этого рецепта."
  #         schema:
  #           type: string
  #     responses:
  #       '201':
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/RecipeMinified'
  #         description: 'Рецепт успешно добавлен в список покупок'
  #       '400':
  #         description: 'Ошибка добавления в список покупок (Например, когда рецепт уже есть в списке покупок)'
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/SelfMadeError'
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'
  #     tags:
  #       - Список покупок
  #   delete:
  #     operationId: Удалить рецепт из списка покупок
  #     description: 'Доступно только авторизованным пользователям'
  #     security:
  #       - Token: [ ]
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: "Уникальный идентификатор этого рецепта."
  #         schema:
  #           type: string
  #     responses:
  #       '204':
  #         description: 'Рецепт успешно удален из списка покупок'
  #       '400':
  #         description: 'Ошибка удаления из списка покупок (Например, когда рецепта там не было)'
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/SelfMadeError'
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'
  #     tags:
  #       - Список покупок
  
  # /api/users/subscriptions/:
  #   get:
  #     operationId: Мои подписки
  #     description: 'Возвращает пользователей, на которых подписан текущий пользователь. В выдачу добавляются рецепты.'
  #     parameters:
  #       - name: page
  #         required: false
  #         in: query
  #         description: Номер страницы.
  #         schema:
  #           type: integer
  #       - name: limit
  #         required: false
  #         in: query
  #         description: Количество объектов на странице.
  #         schema:
  #           type: integer
  #       - name: recipes_limit
  #         required: false
  #         in: query
  #         description: Количество объектов внутри поля recipes.
  #         schema:
  #           type: integer
  #     responses:
  #       '200':
  #         content:
  #           application/json:
  #             schema:
  #               type: object
  #               properties:
  #                 count:
  #                   type: integer
  #                   example: 123
  #                   description: 'Общее количество объектов в базе'
  #                 next:
  #                   type: string
  #                   nullable: true
  #                   format: uri
  #                   example: http://foodgram.example.org/api/users/subscriptions/?page=4
  #                   description: 'Ссылка на следующую страницу'
  #                 previous:
  #                   type: string
  #                   nullable: true
  #                   format: uri
  #                   example: http://foodgram.example.org/api/users/subscriptions/?page=2
  #                   description: 'Ссылка на предыдущую страницу'
  #                 results:
  #                   type: array
  #                   items:
  #                     $ref: '#/components/schemas/UserWithRecipes'
  #                   description: 'Список объектов текущей страницы'
  #         description: ''
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'
  #     tags:
  #       - Подписки
  # /api/users/{id}/subscribe/:
  #   post:
  #     operationId: Подписаться на пользователя
  #     description: 'Доступно только авторизованным пользователям'
  #     security:
  #       - Token: [ ]
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: "Уникальный идентификатор этого пользователя."
  #         schema:
  #           type: string
  #       - name: recipes_limit
  #         required: false
  #         in: query
  #         description: Количество объектов внутри поля recipes.
  #         schema:
  #           type: integer
  #     responses:
  #       '201':
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/UserWithRecipes'
  #         description: 'Подписка успешно создана'
  #       '400':
  #         description: 'Ошибка подписки (Например, если уже подписан или при подписке на себя самого)'
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/SelfMadeError'
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'
  #       '404':
  #         $ref: '#/components/responses/NotFound'
  #     tags:
  #       - Подписки
  #   delete:
  #     operationId: Отписаться от пользователя
  #     description: 'Доступно только авторизованным пользователям'
  #     security:
  #       - Token: [ ]
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: "Уникальный идентификатор этого пользователя."
  #         schema:
  #           type: string
  #     responses:
  #       '204':
  #         description: 'Успешная отписка'
  #       '400':
  #         description: 'Ошибка отписки (Например, если не был подписан)'
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/SelfMadeError'
  #       '401':
  #         $ref: '#/components/responses/AuthenticationError'
  #       '404':
  #         $ref: '#/components/responses/NotFound'

  #     tags:
  #       - Подписки
  # /api/ingredients/:
  #   get:
  #     operationId: Список ингредиентов
  #     description: 'Список ингредиентов с возможностью поиска по имени.'
  #     parameters:
  #       - name: name
  #         required: false
  #         in: query
  #         description: Поиск по частичному вхождению в начале названия ингредиента.
  #         schema:
  #           type: string
  #     responses:
  #       '200':
  #         content:
  #           application/json:
  #             schema:
  #               type: array
  #               items:
  #                 $ref: '#/components/schemas/Ingredient'
  #         description: ''
  #     tags:
  #       - Ингредиенты
  # /api/ingredients/{id}/:
  #   get:
  #     operationId: Получение ингредиента
  #     description: 'Уникальный идентификатор этого ингредиента.'
  #     parameters:
  #       - name: id
  #         in: path
  #         required: true
  #         description: ''
  #         schema:
  #           type: integer
  #     responses:
  #       '200':
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/Ingredient'
  #         description: ''
  #     tags:
  #       - Ингредиенты
  
components:
  schemas:

# -------------Производители----------------------

    Brand:
      description: 'Производитель'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 50
          description: "Название"
          example: "ЭкоФабрика"
        description:
          type: string
          maxLength: 255
          description: "Описание"
          example: "Лучший производитель эко товаров"
        country:
          type: string
          maxLength: 50
          description: "Стара бренда"
          example: "РОссия"
        slug:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^[-a-zA-Z0-9_]+$
          description: 'Уникальный слаг'
          example: 'ecofactory'
          
    BrandCreateUpdate:
      description: 'Производитель'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 50
          description: "Название"
          example: "ЭкоФабрика"
        description:
          type: string
          maxLength: 255
          description: "Описание"
          example: "Лучший производитель эко товаров"
        country:
          type: string
          maxLength: 50
          description: "Стара бренда"
          example: "РОссия"
        # slug:
        #   type: string
        #   nullable: true
        #   maxLength: 200
        #   pattern: ^[-a-zA-Z0-9_]+$
        #   description: 'Уникальный слаг'
        #   example: 'ecofactory'
      required:
        - name
        - description
        - country
  
  # -------------Категории----------------------
  
    Category:
      description: 'Категория'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 50
          description: "Название"
          example: "Ванная комната"
        description:
          type: string
          maxLength: 255
          description: "Описание"
          example: "Товары для ванной комнаты"
        slug:
          type: string
          nullable: true
          maxLength: 200
          pattern: ^[-a-zA-Z0-9_]+$
          description: 'Уникальный слаг'
          example: 'bathroom'
          
    CategoryCreateUpdate:
      description: 'Категория'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 50
          description: "Название"
          example: "Ванная комната"
        description:
          type: string
          maxLength: 255
          description: "Описание"
          example: "Товары для ванной комнаты"
        # slug:
        #   type: string
        #   nullable: true
        #   maxLength: 200
        #   pattern: ^[-a-zA-Z0-9_]+$
        #   description: 'Уникальный слаг'
        #   example: 'bathroom'
      required:
        - name
        - description

# -------------Пользователи-----------------------

    User:
      description:  'Пользователь (В рецепте - автор рецепта)'
      type: object
      properties:
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
        id:
          type: integer
          readOnly: true
        # username:
        #   type: string
        #   description: "Уникальный юзернейм"
        #   pattern: ^[\w.@+-]+\z
        #   maxLength: 150
        #   example: "vasya.pupkin"
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Вася"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Пупкин"
        date_joing:
          type: string
          maxLength: 30
          description: "Дата создания записи"
          example: "2012-05-20 00:17:43.939000"
        is_seller:
          type: boolean
          readOnly: true
          description: "Является ли пользователь продавцом"
          example: True
        discount:
          type: integer
          description: "Скидка пользователя"
          example: 10
        delivery_adresess:
          description: 'Адреса доставки'
          type: array
          items:
            $ref: '#/components/schemas/DeliveryAdreses'
        
      required:
        # - username
        - email
    
    
        
    CustomUserCreate:
      type: object
      properties:
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
          example: "vpupkin@yandex.ru"
        id:
          type: integer
          readOnly: true
        # username:
        #   type: string
        #   description: "Уникальный юзернейм"
        #   pattern: ^[\w.@+-]+\z
        #   maxLength: 150
        #   example: "vasya.pupkin"
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Вася"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Пупкин"
        password:
          type: string
          maxLength: 150
          description: "Пароль"
          example: "Qwerty123"
      required:
        # - username
        - password
        - email

    CustomUserResponseOnCreate:
      type: object
      properties:
        email:
          type: string
          format: email
          maxLength: 254
          description: "Адрес электронной почты"
          example: "vpupkin@yandex.ru"
        id:
          type: integer
          readOnly: true
        # username:
        #   type: string
        #   description: "Уникальный юзернейм"
        #   pattern: ^[\w.@+-]+\z
        #   maxLength: 150
        #   example: "vasya.pupkin"
        first_name:
          type: string
          maxLength: 150
          description: "Имя"
          example: "Вася"
        last_name:
          type: string
          maxLength: 150
          description: "Фамилия"
          example: "Пупкин"
      required:
        # - username
        - email

    # Activation:
    #   type: object
    #   properties:
    #     uid:
    #       type: string
    #     token:
    #       type: string
    #   required:
    #     - uid
    #     - token
    # SendEmailReset:
    #   type: object
    #   properties:
    #     email:
    #       type: string
    #       format: email
    #   required:
    #     - email
    # PasswordResetConfirm:
    #   type: object
    #   properties:
    #     uid:
    #       type: string
    #     token:
    #       type: string
    #     new_password:
    #       type: string
    #   required:
    #     - uid
    #     - token
    #     - new_password
    # UsernameResetConfirm:
    #   type: object
    #   properties:
    #     new_email:
    #       type: string
    #       format: email
    #       maxLength: 254
    SetPassword:
      type: object
      properties:
        new_password:
          type: string
        current_password:
          type: string
      required:
        - new_password
        - current_password
    # SetUsername:
    #   type: object
    #   properties:
    #     current_password:
    #       type: string
    #     new_email:
    #       type: string
    #       format: email
    #       maxLength: 254
    #   required:
    #     - current_password
    TokenCreate:
      type: object
      properties:
        password:
          type: string
        email:
          type: string
    TokenGetResponse:
      type: object
      properties:
        auth_token:
          type: string

# -------------Товары-----------------------------

    ProductList:
      description: 'Данные о товаре'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 50
          description: "Название"
          example: "Перчатка"
        description:
          type: string
          maxLength: 255
          description: "Описание"
          example: "Лучшая перчатка из экологичной резины"
        image_big:
          description: 'Ссылка на картинку на сайте'
          example: 'http://foodgram.example.org/media/products/image_big/image.jpeg'
          type: string
          format: url
        image_icon:
          description: 'Ссылка на картинку на сайте'
          example: 'http://foodgram.example.org/media/products/image_icon/image.jpeg'
          type: string
          format: url
        category:
          type: integer
          description: "Категория"
          example: 33
        brand:
          type: integer
          description: "Производитель"
          example: 12
        events:
          description: 'Адреса доставки'
          type: array
          items:
            $ref: '#/components/schemas/Category'
        price_per_unit:
          type: integer
          description: "Цена за единицу"
          example: 1200
          
# name string
# description string
# image_big text [note: 'url']
# image_icon text [note: 'url']
# category integer
# events integer
# brand integer
# price_per_unit integer
# discount integer
# rating integer
# created_at timestamp
# view_amount integer
# buy_amount integer
        
    ProductCreateUpdate:
      description: 'Данные о товаре'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          maxLength: 50
          description: "Название"
          example: "Перчатка"
        description:
          type: string
          maxLength: 255
          description: "Описание"
          example: "Лучшая перчатка из экологичной резины"
        image_big:
          description: 'Картинка, закодированная в Base64'
          example: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAgMAAABieywaAAAACVBMVEUAAAD///9fX1/S0ecCAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNoAAAAggCByxOyYQAAAABJRU5ErkJggg=='
          type: string
          format: binary
        image_icon:
          description: 'Картинка, закодированная в Base64'
          example: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAgMAAABieywaAAAACVBMVEUAAAD///9fX1/S0ecCAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAACklEQVQImWNoAAAAggCByxOyYQAAAABJRU5ErkJggg=='
          type: string
          format: binary
        category:
          type: integer
          description: "Категория"
          example: 33
        brand:
          type: integer
          description: "Производитель"
          example: 12
        events:
          description: 'Адреса доставки'
          type: array
          items:
            $ref: '#/components/schemas/Category'
        price_per_unit:
          type: integer
          description: "Цена за единицу"
          example: 1200
      required:
        - name
        - description
        - image_big
        - image_icon
        - category
        - brand
        - price_per_unit
          
# ---------------------------------------------------------
 
    DeliveryAdreses:
      description:  'Адрес доставки'
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        phone_number:
          type: string
          maxLength: 20
          description: "Номер телефона"
          example: "+79354987523"
        postal_сode:
          type: string
          maxLength: 10
          description: "Почтовый индекс"
          example: "650320"
        country:
          type: string
          maxLength: 50
          description: "Страна"
          example: "Россия"
        state:
          type: string
          maxLength: 50
          description: "Регион"
          example: "Нижегородская область"
        city:
          type: string
          maxLength: 50
          description: "Город"
          example: "Нижний Новгород"
        street:
          type: string
          maxLength: 50
          description: "Улица"
          example: "Ленина"
        apartment:
          type: integer
          description: "Квартира"
          example: 33
          
      required:
        - phone_number
        - postal_сode
        - country
        - state
        - city
        - street
        - apartment

# ---------------------------------------

    ValidationError:
      description: Стандартные ошибки валидации DRF
      type: object
      properties:
        field_name:
          description: 'Название поля, в котором произошли ошибки. Таких полей может быть несколько'
          example: [ 'Обязательное поле.' ]
          type: array
          items:
            type: string
    # NestedValidationError:
    #   description: Стандартные ошибки валидации DRF
    #   type: object
    #   properties:
    #     ingredients:
    #       description: 'Ошибки в ингредиентах. В приведенном примере в первом и третьем ингредиенте не было ошибок (amount >= 1), а во втором были.'
    #       example: [{},{"amount":["Убедитесь, что это значение больше либо равно 1."]}, {}]
    #       type: array
    #       items:
    #         type: object
    #         properties:
    #           amount:
    #             type: array
    #             items:
    #               type: string

    # SelfMadeError:
    #   description: Ошибка
    #   type: object
    #   properties:
    #     errors:
    #       description: 'Описание ошибки'
    #       type: string

    AuthenticationError:
      description: Пользователь не авторизован
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "Учетные данные не были предоставлены."
          type: string

    PermissionDenied:
      description: Недостаточно прав
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "У вас недостаточно прав для выполнения данного действия."
          type: string
    NotFound:
      description: Объект не найден
      type: object
      properties:
        detail:
          description: 'Описание ошибки'
          example: "Страница не найдена."
          type: string

  responses:
    ValidationError:
      description: 'Ошибки валидации в стандартном формате DRF'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ValidationError'
    NestedValidationError:
      description: 'Ошибки валидации в стандартном формате DRF, в том числе с внутренними элементами.'
      content:
        application/json:
          schema:
            oneOf:
              # - $ref: '#/components/schemas/NestedValidationError'
              - $ref: '#/components/schemas/ValidationError'

    AuthenticationError:
      description: Пользователь не авторизован
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AuthenticationError'

    PermissionDenied:
      description: Недостаточно прав
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PermissionDenied'

    NotFound:
      description: Объект не найден
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotFound'


  securitySchemes:
    Token:
      description: 'Авторизация по токену. <br>
      Все запросы от имени пользователя должны выполняться с заголовком "Authorization: Token TOKENVALUE"'
      type: http
      scheme: token
